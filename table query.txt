create table users(
	user_id int auto_increment primary key,
	name varchar(255),
	ph_no varchar(20),
	email varchar(255) unique
);

create table address(
addr_id int auto_increment primary key,
user_id int,
door varchar(20),
street varchar(255),
city varchar(255),
state varchar(255),
country varchar(255),
foreign key(user_id) references users(user_id) ON DELETE CASCADE
);

create table products(
 prod_id int auto_increment primary key,
 pname varchar(255),
 stock int not null,
 available boolean default true,
 price DECIMAL(10,2) 
);
create table orders(
order_id int auto_increment primary key,
status varchar(255) not null,
order_date date ,
qty int,
user_id int not null,
foreign key(user_id) references users(user_id) ON DELETE CASCADE

);
create table payment(
pay_id int auto_increment primary key,
pay_status varchar(255) not null,
amount DECIMAL(10,2) not null,
user_id int,
order_id int,
FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE,
FOREIGN KEY (order_id) REFERENCES orders(order_id) ON DELETE CASCADE
);

create table cart (
cart_id integer auto_increment PRIMARY KEY,
user_id integer,
foreign key (user_id) references users(user_id)
);

create table cart_items(
cart_item_id int auto_increment PRIMARY KEY,
cart_id int,
p_id int,
quantity int,
foreign key (cart_id) references cart(cart_id),
foreign key (p_id) references products(prod_id)
 );